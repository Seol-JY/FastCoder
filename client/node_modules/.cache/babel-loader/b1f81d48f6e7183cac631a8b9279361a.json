{"ast":null,"code":"var _jsxFileName = \"/Users/seol-jy/Desktop/Github_Projects/FastCoder/client/src/components/LeaderBoard.jsx\",\n    _s = $RefreshSig$();\n\nimport fetcher from '../utils/fetcher';\nimport { useState, useEffect, useCallback } from 'react';\nimport { useInView } from \"react-intersection-observer\";\nimport LeaderBoardContents from './LeaderBoardContents';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function LeaderBoard() {\n  _s();\n\n  const [prev, prevInView] = useInView(); // 무한 스크롤용 ref - 이전\n\n  const [next, nextInView] = useInView(); // 무한 스크롤용 ref - 이후\n\n  const [page, setPage] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [items, setItems] = useState([]);\n  const getItems = useCallback(async () => {\n    if (page <= 1) {\n      setPage(1); // page 0이하로 내려가는거 막음\n    }\n\n    setLoading(true);\n    fetcher.load(page).then(data => {\n      setItems(data);\n      setLoading(false);\n    });\n  }, [page]);\n  useEffect(() => {\n    getItems();\n  }, [getItems]);\n  useEffect(() => {\n    if (prevInView && !loading) {\n      setPage(prevState => prevState - 1);\n    }\n  }, [prevInView]);\n  useEffect(() => {\n    if (nextInView && !loading) {\n      setPage(prevState => prevState + 1);\n    }\n  }, [nextInView]);\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    className: \"sidebarsection-rank\",\n    children: items.map((s, i) => {\n      if (i === 3) {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          ref: prev,\n          children: /*#__PURE__*/_jsxDEV(LeaderBoardContents, {\n            s: s\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 54\n          }, this)\n        }, s._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 27\n        }, this);\n      }\n\n      if (i === items.length - 1) {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          ref: next,\n          children: /*#__PURE__*/_jsxDEV(LeaderBoardContents, {\n            s: s\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 54\n          }, this)\n        }, s._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 27\n        }, this);\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(LeaderBoardContents, {\n          s: s\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 40\n        }, this)\n      }, s._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 24\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 7\n  }, this);\n}\n\n_s(LeaderBoard, \"lHZ6Vxugenh7engHijplbM5U9/w=\", false, function () {\n  return [useInView, useInView];\n});\n\n_c = LeaderBoard;\n\nvar _c;\n\n$RefreshReg$(_c, \"LeaderBoard\");","map":{"version":3,"names":["fetcher","useState","useEffect","useCallback","useInView","LeaderBoardContents","LeaderBoard","prev","prevInView","next","nextInView","page","setPage","loading","setLoading","items","setItems","getItems","load","then","data","prevState","map","s","i","_id","length"],"sources":["/Users/seol-jy/Desktop/Github_Projects/FastCoder/client/src/components/LeaderBoard.jsx"],"sourcesContent":["import fetcher from '../utils/fetcher';\nimport { useState, useEffect, useCallback } from 'react'\nimport { useInView } from \"react-intersection-observer\"\nimport LeaderBoardContents from './LeaderBoardContents';\n\nexport default function LeaderBoard() {\n    const [prev, prevInView] = useInView();  // 무한 스크롤용 ref - 이전\n    const [next, nextInView] = useInView();  // 무한 스크롤용 ref - 이후\n    const [page, setPage] = useState(1);\n    const [loading, setLoading] = useState(false);\n    const [items, setItems] = useState([]);\n\n    const getItems = useCallback(async () => {\n      if (page <= 1) {\n        setPage(1);  // page 0이하로 내려가는거 막음\n      } \n      setLoading(true);\n      fetcher.load(page).then((data) => {\n        setItems(data);\n        setLoading(false);\n      });\n    }, [page]);\n\n    useEffect(() => {\n      getItems();\n    }, [getItems]);\n    \n    useEffect(() => {\n      if (prevInView && !loading) {\n        setPage((prevState) => prevState - 1);\n      }\n    }, [prevInView]);\n\n    useEffect(() => {\n      if (nextInView && !loading) {\n        setPage((prevState) => prevState + 1);\n      }\n    }, [nextInView]);\n\n    return (\n      <ul className=\"sidebarsection-rank\">\n          {\n            items.map((s, i) => {\n                if(i===3) {\n                    return<li key={s._id} ref={prev}><LeaderBoardContents s={s}/></li>  \n                }\n                if(i===items.length-1) {\n                    return<li key={s._id} ref={next}><LeaderBoardContents s={s}/></li>  \n                }\n                return <li key={s._id}><LeaderBoardContents s={s}/></li>\n            })\n          }\n      </ul>\n    )\n}"],"mappings":";;;AAAA,OAAOA,OAAP,MAAoB,kBAApB;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,WAA9B,QAAiD,OAAjD;AACA,SAASC,SAAT,QAA0B,6BAA1B;AACA,OAAOC,mBAAP,MAAgC,uBAAhC;;AAEA,eAAe,SAASC,WAAT,GAAuB;EAAA;;EAClC,MAAM,CAACC,IAAD,EAAOC,UAAP,IAAqBJ,SAAS,EAApC,CADkC,CACO;;EACzC,MAAM,CAACK,IAAD,EAAOC,UAAP,IAAqBN,SAAS,EAApC,CAFkC,CAEO;;EACzC,MAAM,CAACO,IAAD,EAAOC,OAAP,IAAkBX,QAAQ,CAAC,CAAD,CAAhC;EACA,MAAM,CAACY,OAAD,EAAUC,UAAV,IAAwBb,QAAQ,CAAC,KAAD,CAAtC;EACA,MAAM,CAACc,KAAD,EAAQC,QAAR,IAAoBf,QAAQ,CAAC,EAAD,CAAlC;EAEA,MAAMgB,QAAQ,GAAGd,WAAW,CAAC,YAAY;IACvC,IAAIQ,IAAI,IAAI,CAAZ,EAAe;MACbC,OAAO,CAAC,CAAD,CAAP,CADa,CACA;IACd;;IACDE,UAAU,CAAC,IAAD,CAAV;IACAd,OAAO,CAACkB,IAAR,CAAaP,IAAb,EAAmBQ,IAAnB,CAAyBC,IAAD,IAAU;MAChCJ,QAAQ,CAACI,IAAD,CAAR;MACAN,UAAU,CAAC,KAAD,CAAV;IACD,CAHD;EAID,CAT2B,EASzB,CAACH,IAAD,CATyB,CAA5B;EAWAT,SAAS,CAAC,MAAM;IACde,QAAQ;EACT,CAFQ,EAEN,CAACA,QAAD,CAFM,CAAT;EAIAf,SAAS,CAAC,MAAM;IACd,IAAIM,UAAU,IAAI,CAACK,OAAnB,EAA4B;MAC1BD,OAAO,CAAES,SAAD,IAAeA,SAAS,GAAG,CAA5B,CAAP;IACD;EACF,CAJQ,EAIN,CAACb,UAAD,CAJM,CAAT;EAMAN,SAAS,CAAC,MAAM;IACd,IAAIQ,UAAU,IAAI,CAACG,OAAnB,EAA4B;MAC1BD,OAAO,CAAES,SAAD,IAAeA,SAAS,GAAG,CAA5B,CAAP;IACD;EACF,CAJQ,EAIN,CAACX,UAAD,CAJM,CAAT;EAMA,oBACE;IAAI,SAAS,EAAC,qBAAd;IAAA,UAEMK,KAAK,CAACO,GAAN,CAAU,CAACC,CAAD,EAAIC,CAAJ,KAAU;MAChB,IAAGA,CAAC,KAAG,CAAP,EAAU;QACN,oBAAM;UAAgB,GAAG,EAAEjB,IAArB;UAAA,uBAA2B,QAAC,mBAAD;YAAqB,CAAC,EAAEgB;UAAxB;YAAA;YAAA;YAAA;UAAA;QAA3B,GAASA,CAAC,CAACE,GAAX;UAAA;UAAA;UAAA;QAAA,QAAN;MACH;;MACD,IAAGD,CAAC,KAAGT,KAAK,CAACW,MAAN,GAAa,CAApB,EAAuB;QACnB,oBAAM;UAAgB,GAAG,EAAEjB,IAArB;UAAA,uBAA2B,QAAC,mBAAD;YAAqB,CAAC,EAAEc;UAAxB;YAAA;YAAA;YAAA;UAAA;QAA3B,GAASA,CAAC,CAACE,GAAX;UAAA;UAAA;UAAA;QAAA,QAAN;MACH;;MACD,oBAAO;QAAA,uBAAgB,QAAC,mBAAD;UAAqB,CAAC,EAAEF;QAAxB;UAAA;UAAA;UAAA;QAAA;MAAhB,GAASA,CAAC,CAACE,GAAX;QAAA;QAAA;QAAA;MAAA,QAAP;IACH,CARD;EAFN;IAAA;IAAA;IAAA;EAAA,QADF;AAeH;;GAjDuBnB,W;UACOF,S,EACAA,S;;;KAFPE,W"},"metadata":{},"sourceType":"module"}